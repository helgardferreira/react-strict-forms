(this["webpackJsonpreact-strict-forms-example"]=this["webpackJsonpreact-strict-forms-example"]||[]).push([[0],{23:function(e,t,n){e.exports=n(30)},24:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);n(24);var r=n(0),i=n.n(r),a=n(12),u=n.n(a),s=n(4),c=n(6),o=n(5),l=n(1),f=n(7),b=n(14),d=n(13),h=n.n(d),v=function(){function e(t){Object(l.a)(this,e),this.fields={},this.initialFields={},this._fields=t;for(var n=0,r=Object.entries(t);n<r.length;n++){var i=Object(s.a)(r[n],2),a=i[0],u=i[1];"function"!==typeof u&&(this.fields[a]=u,this.initialFields[a]=u)}this._errors=[],this._observers=[]}return Object(f.a)(e,[{key:"validate",value:function(){return this._errors=this._fields.validate(),this.notify("ERROR"),this._errors}},{key:"subscribe",value:function(e){var t=this;this._observers.push(e);return function(){var n=t._observers.indexOf(e);t._observers.splice(n,1)}}},{key:"getErrors",value:function(){return this._errors}},{key:"setState",value:function(e,t){void 0!==this.fields[e]&&(this.fields[e]=t,this._fields[e]=t)}},{key:"notify",value:function(e){this._observers.filter((function(t){return t.type===e})).forEach((function(e){return e.cb()}))}}]),e}(),p=Object(r.createContext)(null),m=function(e){var t=e.value,n=e.children,r=t;return i.a.createElement(p.Provider,{value:r},n)},j=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.apply(this,arguments)).state={formSubject:new v(e.props.fields)},e}return Object(f.a)(n,[{key:"handleSubmit",value:function(e){0===this.state.formSubject.validate().length&&this.props.handleSubmit(this.state.formSubject.fields),e.preventDefault()}},{key:"componentDidUpdate",value:function(e){e.fields!==this.props.fields&&this.setState({formSubject:new v(this.props.fields)})}},{key:"render",value:function(){var e=this;return i.a.createElement(m,{value:this.state.formSubject},i.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},this.props.children))}}]),n}(r.Component),O=function(){function e(){Object(l.a)(this,e)}return Object(f.a)(e,[{key:"validate",value:function(){return Object(b.a)(this)}}]),e}();var y=function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object(r.useReducer)((function(e){return e+1}),0)[1],i=Object(r.useRef)([]),a=i.current;return Object(r.useLayoutEffect)((function(){i.current=a})),Object(r.useLayoutEffect)((function(){var r=e.subscribe({type:"ERROR",cb:function(){var r=e.getErrors(),a=0===t.length?r:r.filter((function(e){var n=e.property;return-1!==t.indexOf(n)}));0===i.current.length&&0===a.length||(i.current=a,n())}});return function(){return r()}}),[e]),a}(Object(r.useContext)(p),e)};function g(){var e=Object(r.useContext)(p);var t=Object(r.useCallback)(function(e){var t=Object(r.useReducer)((function(e){return e+1}),0)[1];return function(n,r){if(void 0===r)return function(r){e.setState(n,r.target.value),t()};e.setState(n,r),t()}}(e),[e]),n=Object(r.useCallback)((function(){return!h()(e.initialFields,e.fields)}),[e]);return[Object(r.useMemo)((function(){return{fields:e.fields,isDirty:n}}),[e]),t]}var E,S,w,k,_,x,R,C=n(8),D=n(3),F=n(9),z=(n(29),n(34)),J=n(36),L=(E=Object(z.a)(),S=Object(J.a)(),w=Object(z.a)(),k=Object(J.a)(),_=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object(l.a)(this,n),e=t.call(this),Object(C.a)(e,"username",x,Object(D.a)(e)),Object(C.a)(e,"password",R,Object(D.a)(e)),e.username=r,e.password=i,e}return n}(O),x=Object(F.a)(_.prototype,"username",[E,S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=Object(F.a)(_.prototype,"password",[w,k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_),B=function(){var e=g(),t=Object(s.a)(e,2),n=t[0],r=n.fields,a=r.username,u=r.password,c=n.isDirty,o=t[1],l=y();return console.log(l.length),console.log(c()),i.a.createElement("div",null,"React Strict Forms Example"," ",i.a.createElement("span",{role:"img","aria-label":"smiling emoji"},"\ud83d\ude04"),"'",i.a.createElement("input",{type:"text",name:"username",id:"username",value:a,onChange:o("username")}),i.a.createElement("input",{type:"password",name:"password",id:"password",value:u,onChange:o("password")}),i.a.createElement("input",{type:"submit",value:"Submit"}))},I=function(){return i.a.createElement(j,{fields:new L("",""),handleSubmit:function(e){return console.log(e)}},i.a.createElement(B,null))};u.a.render(i.a.createElement(I,null),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.09e80d04.chunk.js.map