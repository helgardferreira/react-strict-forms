(this["webpackJsonpreact-strict-forms-example"]=this["webpackJsonpreact-strict-forms-example"]||[]).push([[0],{21:function(e,t,r){e.exports=r(28)},22:function(e,t,r){},28:function(e,t,r){"use strict";r.r(t);r(22);var n=r(0),i=r.n(n),a=r(7),o=r.n(a),u=r(10),s=r(9);var c=function(){function e(e){this._fields=e,this.fields={};for(var t=0,r=Object.entries(e);t<r.length;t++){var n=r[t],i=n[0],a=n[1];"function"!==typeof a&&(this.fields[i]=a)}this._errors=[],this._observers=[]}var t=e.prototype;return t.validate=function(){return this._errors=this._fields.validate(),this.notify("ERROR"),this._errors},t.subscribe=function(e){var t=this;this._observers.push(e);return function(){var r=t._observers.indexOf(e);t._observers.splice(r,1)}},t.getErrors=function(){return this._errors},t.setState=function(e,t){void 0!==this.fields[e]&&(this.fields[e]=t,this._fields[e]=t)},t.notify=function(e){this._observers.filter((function(t){return t.type===e})).forEach((function(e){return e.cb()}))},e}(),l=Object(n.createContext)(null),f=function(e){var t=e.value,r=e.children,n=t;return i.a.createElement(l.Provider,{value:n},r)},p=function(e){var t,r;function n(){var t;return(t=e.apply(this,arguments)||this).state={formSubject:new c(t.props.fields)},t}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=n.prototype;return a.handleSubmit=function(e){0===this.state.formSubject.validate().length&&this.props.handleSubmit(this.state.formSubject.fields),e.preventDefault()},a.componentDidUpdate=function(e){e.fields!==this.props.fields&&this.setState({formSubject:new c(this.props.fields)})},a.render=function(){var e=this;return i.a.createElement(f,{value:this.state.formSubject},i.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},this.props.children))},n}(n.Component),b=function(){function e(){}return e.prototype.validate=function(){return Object(s.a)(this)},e}();var d=function(e){return function(e,t){void 0===t&&(t=[]);var r=Object(n.useReducer)((function(e){return e+1}),0)[1],i=Object(n.useRef)([]),a=i.current;return Object(n.useLayoutEffect)((function(){i.current=a})),Object(n.useLayoutEffect)((function(){var n=e.subscribe({type:"ERROR",cb:function(){var n=e.getErrors(),a=0===t.length?n:n.filter((function(e){var r=e.property;return-1!==t.indexOf(r)}));0===i.current.length&&0===a.length||(i.current=a,r())}});return function(){return n()}}),[e]),a}(Object(n.useContext)(l),e)};function h(){var e=Object(n.useContext)(l);return[e.fields,Object(n.useCallback)(function(e){var t=Object(n.useReducer)((function(e){return e+1}),0)[1];return function(r,n){if(void 0===n)return function(n){e.setState(r,n.target.value),t()};e.setState(r,n),t()}}(e),[e])]}var m,v,j,O,g,y,E,S=r(3),_=r(8),w=r(2),x=r(12),R=r(11),C=r(4),k=(r(27),r(32)),J=r(34),z=(m=Object(k.a)(),v=Object(J.a)(),j=Object(k.a)(),O=Object(J.a)(),g=function(e){Object(x.a)(r,e);var t=Object(R.a)(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object(_.a)(this,r),e=t.call(this),Object(S.a)(e,"username",y,Object(w.a)(e)),Object(S.a)(e,"password",E,Object(w.a)(e)),e.username=n,e.password=i,e}return r}(b),y=Object(C.a)(g.prototype,"username",[m,v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=Object(C.a)(g.prototype,"password",[j,O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g),D=function(){var e=h(),t=Object(u.a)(e,2),r=t[0],n=r.username,a=r.password,o=t[1],s=d();return console.log(JSON.stringify(s,null,2)),i.a.createElement("div",null,"React Strict Forms Example"," ",i.a.createElement("span",{role:"img","aria-label":"smiling emoji"},"\ud83d\ude04"),"'",i.a.createElement("input",{type:"text",name:"username",id:"username",value:n,onChange:o("username")}),i.a.createElement("input",{type:"password",name:"password",id:"password",value:a,onChange:o("password")}),i.a.createElement("input",{type:"submit",value:"Submit"}))},L=function(){return console.log("rendering App..."),i.a.createElement(p,{fields:new z("",""),handleSubmit:function(e){return console.log(e)}},i.a.createElement(D,null))};o.a.render(i.a.createElement(L,null),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.cf832a50.chunk.js.map